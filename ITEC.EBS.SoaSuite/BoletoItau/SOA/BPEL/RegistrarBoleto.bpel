<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer

  Created: Tue Aug 07 14:21:29 BRT 2018
  Author:  ncjunior
  Type: BPEL 2.0 Process
  Purpose: Empty BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="RegistrarBoleto"
               targetNamespace="http://xmlns.oracle.com/ITEC_EBS_SoaSuite/BoletoItau/RegistrarBoleto"
               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
               xmlns:client="http://xmlns.oracle.com/ITEC_EBS_SoaSuite/BoletoItau/RegistrarBoleto"
               xmlns:ora="http://schemas.oracle.com/xpath/extension"
               xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
               xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:ns1="http://Edenred.Services/BoletoItau"
         xmlns:ns2="http://xmlns.oracle.com/ITEC.EBS.ServiceBus/BoletoItau/geradorBoletosItau"
         xmlns:ns3="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/pollingBoletos"
         xmlns:ui="http://xmlns.oracle.com/soa/designer"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:ess="http://xmlns.oracle.com/scheduler" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap"
         xmlns:ns4="http://Edenred.Services/geradorBoletosItau_geradorBoletos_request"
         xmlns:ns5="http://xmlns.oracle.com/pcbpel/adapter/file/ITEC.EBS.SoaSuite/BoletoItau/fileReference"
         xmlns:ns6="http://xmlns.oracle.com/pcbpel/adapter/db/top/pollingBoletos"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
         xmlns:ns7="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/UPDATE"
         xmlns:ns8="http://Edenred.Services/geradorBoletosItau_geradorBoletos_response"
         xmlns:ns9="http://xmlns.oracle.com/pcbpel/adapter/db/top/UPDATE"
         xmlns:ns10="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/dbService"
         xmlns:ns11="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/REGISTRA_BOLETO"
         xmlns:ns12="http://xmlns.oracle.com/pcbpel/adapter/db/sp/REGISTRA_BOLETO"
         xmlns:ns13="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/REGISTRA_LOG_ERRO"
         xmlns:ns14="http://Edenred.Services/geradorBoletosItau_geradorBoletos_validation_error"
         xmlns:ns15="http://Edenred.Services/geradorBoletosItau_geradorBoletos_validation_token"
         xmlns:ns16="http://Edenred.Services/geradorBoletosItau_geradorBoletos_validation_422"
         xmlns:ns17="http://xmlns.oracle.com/pcbpel/adapter/db/sp/REGISTRA_LOG_ERRO"
         xmlns:ns18="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/SETUP_ORG_FATURAMENTO"
         xmlns:ns19="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/select_update_token"
         xmlns:ns20="http://xmlns.oracle.com/pcbpel/adapter/db/top/select_update_token"
         xmlns:ns21="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/ATUALIZA_TOKEN"
         xmlns:ns22="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/CONSULTA_TOKEN"
         xmlns:ns23="http://xmlns.oracle.com/pcbpel/adapter/db/sp/CONSULTA_TOKEN"
         xmlns:ns24="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ATUALIZA_TOKEN"
         xmlns:ns25="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/ATUALIZA_STATUS"
         xmlns:ns26="http://xmlns.oracle.com/pcbpel/adapter/db/sp/ATUALIZA_STATUS"
         xmlns:ns27="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/EXCLUI_POOLING"
         xmlns:ns28="http://xmlns.oracle.com/pcbpel/adapter/db/ITEC.EBS.SoaSuite/BoletoItau/EXCLUI_POLLING"
         xmlns:ns29="http://xmlns.oracle.com/pcbpel/adapter/db/sp/EXCLUI_POLLING">

  <!--
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     ORCHESTRATION LOGIC
     Set of activities coordinating the flow of messages across the
     services integrated within this business process
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  -->
  <import namespace="http://schemas.oracle.com/bpel/extension" location="../WSDLs/RuntimeFault.wsdl"
          importType="http://schemas.xmlsoap.org/wsdl/"/>
  <import namespace="http://Edenred.Services/geradorBoletosItau_geradorBoletos_request" location="../Schemas/header.xsd"
          importType="http://www.w3.org/2001/XMLSchema"/>
  <import namespace="http://Edenred.Services/BoletoItau" location="../WSDLs/autorizadorWrapper.wsdl"
          importType="http://schemas.xmlsoap.org/wsdl/" ui:processWSDL="true"/>
  <partnerLinks>
    <partnerLink name="GerarBoleto" partnerLinkType="ns2:geradorBoletosItau" partnerRole="geradorBoletosItauProvider"/>
    <partnerLink name="pollingBoletos" partnerLinkType="ns3:pollingBoletos_plt" myRole="pollingBoletos_role"/>
    <partnerLink name="REGISTRA_BOLETO" partnerLinkType="ns11:REGISTRA_BOLETO_plt" partnerRole="REGISTRA_BOLETO_role"/>
    <partnerLink name="REGISTRA_LOG_ERRO" partnerLinkType="ns13:REGISTRA_LOG_ERRO_plt"
                 partnerRole="REGISTRA_LOG_ERRO_role"/>
    <partnerLink name="Autorizador" partnerLinkType="ns1:Autorizador" partnerRole="AutorizadorItauSoap"/>
    <partnerLink name="ATUALIZA_TOKEN" partnerLinkType="ns21:ATUALIZA_TOKEN_plt" partnerRole="ATUALIZA_TOKEN_role"/>
    <partnerLink name="CONSULTA_TOKEN" partnerLinkType="ns22:CONSULTA_TOKEN_plt" partnerRole="CONSULTA_TOKEN_role"/>
    <partnerLink name="ATUALIZA_STATUS" partnerLinkType="ns25:ATUALIZA_STATUS_plt" partnerRole="ATUALIZA_STATUS_role"/>
    <partnerLink name="EXCLUI_POLLING" partnerLinkType="ns28:EXCLUI_POLLING_plt" partnerRole="EXCLUI_POLLING_role"/>
  </partnerLinks>
  <variables>
    <variable name="Receive_polling_Input" messageType="ns3:TktArBoletoRemessaCollection_msg"/>
    <variable name="Invoke_AutorizadorItau_Input" messageType="ns1:RequestSoapIn"/>
    <variable name="Invoke_AutorizadorItau_Output" messageType="ns1:ResponseSoapOut"/>
    <variable name="Invoke_geradorBoletos_Input" messageType="ns2:geradorBoletos_inputMessage"/>
    <variable name="Invoke_geradorBoletos_Output" messageType="ns2:geradorBoletos_outputMessage"/>
    <variable name="Header" element="ns4:Header"/>
    <variable name="exception" messageType="bpelx:RuntimeFaultMessage"/>
    <variable name="InvokeRegistraBoleto_Input" messageType="ns11:args_in_msg"/>
    <variable name="InvokeRegistraLogErro_Input" messageType="ns13:args_in_msg"/>
    <variable name="InvokeConsultaToken_Input" messageType="ns22:args_in_msg"/>
    <variable name="InvokeConsultaToken_Output" messageType="ns22:args_out_msg"/>
    <variable name="InvokeAtualizaToken_Input" messageType="ns21:args_in_msg"/>
    <variable name="InvokeAtualizaToken_Output" messageType="ns21:args_out_msg"/>
    <variable name="InvokeRegistraLogErro_Output" messageType="ns13:args_out_msg"/>
    <variable name="InvokeRegistraBoleto_Output" messageType="ns11:args_out_msg"/>
    <variable name="InvokeAtualizaStatus_Input" messageType="ns25:args_in_msg"/>
    <variable name="InvokeAtualizaStatus_Output" messageType="ns25:args_out_msg"/>
    <variable name="InvokeExcluiPolling_Input" messageType="ns28:args_in_msg"/>
    <variable name="InvokeExcluiPolling_Output" messageType="ns28:args_out_msg"/>
  </variables>
  <sequence name="main">
    <receive name="Receive" createInstance="yes" partnerLink="pollingBoletos" portType="ns3:pollingBoletos_ptt"
             operation="receive" variable="Receive_polling_Input"/>
    <scope name="ScopeVerificaToken">
      <sequence name="Sequence13">
        <assign name="AssignSelectToken">
          <copy>
            <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:orgId</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeConsultaToken_Input.InputParameters/ns23:VP_ORG_ID</to>
          </copy>
          <copy>
            <from>translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/','')</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeConsultaToken_Input.InputParameters/ns23:VP_CNPJ_CEDENTE_BOLETO</to>
          </copy>
        </assign>
        <invoke name="InvokeConsultaToken" partnerLink="CONSULTA_TOKEN"
                portType="ns22:CONSULTA_TOKEN_ptt" operation="CONSULTA_TOKEN"
                inputVariable="InvokeConsultaToken_Input" outputVariable="InvokeConsultaToken_Output"
                bpelx:invokeAsDetail="no"/>
        <if name="IfExisteToken">
          <documentation>
            <![CDATA[VAZIO]]>
          </documentation>
          <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeConsultaToken_Output.OutputParameters/ns23:VP_ID_TOKEN = ''</condition>
          <sequence name="Sequence14">
            <scope name="Scope2">
              <faultHandlers>
                <catch faultName="bpelx:remoteFault" faultVariable="remote_fault_error"
                       faultMessageType="bpelx:RuntimeFaultMessage"><sequence name="Sequence19"><assign name="AssignGerado"
                                                                                                        xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
   <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaStatus_Input.InputParameters/ns26:VP_ID_BOLETO</to>
      </copy><copy>
         <from>'GERADO'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaStatus_Input.InputParameters/ns26:VP_BOLETO_STATUS</to>
      </copy></assign><invoke name="InvokeAtualizaStatus" partnerLink="ATUALIZA_STATUS" portType="ns25:ATUALIZA_STATUS_ptt"
                    operation="ATUALIZA_STATUS" inputVariable="InvokeAtualizaStatus_Input"
                    outputVariable="InvokeAtualizaStatus_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></catch>
              </faultHandlers>
              <sequence>
                <assign name="AssignAutorizador" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                  <copy>
                    <from>dvm:lookupValue("DVM/credentials_api_itau.dvm","cnpj",translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/',''),"scope", "")</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Invoke_AutorizadorItau_Input.parameters/ns1:scope</to>
                  </copy>
                  <copy>
                    <from>dvm:lookupValue("DVM/credentials_api_itau.dvm","cnpj", translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/',''),"grant_type", "")</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Invoke_AutorizadorItau_Input.parameters/ns1:grant_type</to>
                  </copy>
                  <copy>
                    <from>dvm:lookupValue("DVM/credentials_api_itau.dvm","cnpj", translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/',''),"id_client", "")</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Invoke_AutorizadorItau_Input.parameters/ns1:client_id</to>
                  </copy>
                  <copy>
                    <from>dvm:lookupValue("DVM/credentials_api_itau.dvm","cnpj", translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/',''),"secret", "")</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Invoke_AutorizadorItau_Input.parameters/ns1:client_secret</to>
                  </copy>
                </assign>
                <invoke name="Invoke_AutorizadorItau" partnerLink="Autorizador" portType="ns1:AutorizadorItauSoap"
                        operation="AutorizadorItau" inputVariable="Invoke_AutorizadorItau_Input"
                        outputVariable="Invoke_AutorizadorItau_Output" bpelx:invokeAsDetail="no"/>
              </sequence>
            </scope><if name="If_autorizador_error"
                                                   xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <documentation>
                <![CDATA[Erro]]>
              </documentation>
      <condition expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Invoke_AutorizadorItau_Output.parameters/ns1:error != '' or $Invoke_AutorizadorItau_Output.parameters/ns1:message != ''</condition>
      <sequence name="Sequence2">
                <assign name="AssignInvalidClient">
                  <copy>
                    <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
                  </copy>
                  <copy ignoreMissingFromData="yes">
                    <from>$Invoke_AutorizadorItau_Output.parameters/ns1:error</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to>
                  </copy>
                  <copy ignoreMissingFromData="yes">
                    <from>$Invoke_AutorizadorItau_Output.parameters/ns1:message</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to>
                  </copy>
                  <copy>
                    <from>ora:getFlowId()</from>
                    <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
                  </copy>
                </assign><invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO"
                                 portType="ns13:REGISTRA_LOG_ERRO_ptt" operation="REGISTRA_LOG_ERRO"
                                 inputVariable="InvokeRegistraLogErro_Input"
                                 xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                                 xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable" outputVariable="InvokeRegistraLogErro_Output"
                                 bpelx:invokeAsDetail="no"/>
                <exit name="ExitInvalidClient"/></sequence>
      <else>
         <documentation>
                  <![CDATA[Sem Erro]]>
                </documentation>
         <sequence name="Sequence1">
                  <assign name="AssignHeader" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                    <copy>
                      <from>"application/vnd.itau"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:Accept</to>
                    </copy>
                    <copy>
                      <from>$Invoke_AutorizadorItau_Output.parameters/ns1:access_token</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:access_token</to>
                    </copy>
                    <copy>
                      <from>"9a6a013b-54df-49a5-bf99-f674761f5775"</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:itau-chave</to>
                    </copy>
                    <copy>
                      <from>translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/','')</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:identificador</to>
                    </copy>
                  </assign>
                  <assign name="AssignUpdateToken">
                    <copy>
                      <from>$Invoke_AutorizadorItau_Output.parameters/ns1:access_token</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_ID_TOKEN</to>
                    </copy>
                    <copy>
                      <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:orgId</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_ORG_ID</to>
                    </copy>
                    <copy>
                      <from>translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/','')</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_CNPJ_CEDENTE_BOLETO</to>
                    </copy>
                  </assign>
                  <invoke name="InvokeAtualizaToken" partnerLink="ATUALIZA_TOKEN"
                          portType="ns21:ATUALIZA_TOKEN_ptt" operation="ATUALIZA_TOKEN"
                          inputVariable="InvokeAtualizaToken_Input" outputVariable="InvokeAtualizaToken_Output"
                          bpelx:invokeAsDetail="no"/>
         </sequence>
      </else>
   </if></sequence>
          <else>
            <documentation>
              <![CDATA[SIM]]>
            </documentation>
            <sequence>
              <assign name="AssignHeader" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                <copy>
                  <from>"application/vnd.itau"</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:Accept</to>
                </copy>
                <copy>
                  <from>$InvokeConsultaToken_Output.OutputParameters/ns23:VP_ID_TOKEN</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:access_token</to>
                </copy>
                <copy>
                  <from>"9a6a013b-54df-49a5-bf99-f674761f5775"</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:itau-chave</to>
                </copy>
                <copy>
                  <from>translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/','')</from>
                  <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$Header/ns4:identificador</to>
                </copy>
              </assign>
            </sequence>
          </else>
        </if>
      </sequence>
    </scope>
    <assign name="polling_to_api">
      <bpelx:annotation>
        <bpelx:pattern patternName="bpelx:transformation"></bpelx:pattern>
      </bpelx:annotation>
      <copy>
        <from>ora:doXSLTransformForDoc("../Transformations/polling_to_api_request.xsl", $Receive_polling_Input.TktArBoletoRemessaCollection)</from>
        <to variable="Invoke_geradorBoletos_Input" part="request"/>
      </copy>
    </assign>
    <scope name="ScopeRegistrarBoleto">
      <faultHandlers>
        <catch faultName="ns2:internal_server_error" faultVariable="internal_server_error"
               faultMessageType="ns2:geradorBoletos_internal_server_errorMessage">
          <sequence>
            <assign name="Assign500" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
              </copy>
              <copy>
                <from>$internal_server_error.fault_internal_server_error/ns14:codigo</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to>
              </copy>
              <copy>
                <from>$internal_server_error.fault_internal_server_error/ns14:mensagem</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to>
              </copy>
              <copy>
                <from>ora:getFlowId()</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
              </copy>
            </assign>
            <invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO" portType="ns13:REGISTRA_LOG_ERRO_ptt"
                    operation="REGISTRA_LOG_ERRO" inputVariable="InvokeRegistraLogErro_Input"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                    outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/>
            <assign name="AssignExcluiPolling" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
              </copy>
            </assign>
            <invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/>
          </sequence>
        </catch>
        <catch faultName="ns2:validation_acess" faultVariable="validation_acess"
               faultMessageType="ns2:geradorBoletos_validation_acessMessage"><sequence name="Sequence16"><assign name="Assign403"
                                                                                                                 xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
      
      
   <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
      </copy><copy><from>$validation_acess.fault_validation_acess/ns14:codigo</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to></copy><copy><from>$validation_acess.fault_validation_acess/ns14:mensagem</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to></copy><copy>
         <from>ora:getFlowId()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
      </copy></assign><invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO"
                              portType="ns13:REGISTRA_LOG_ERRO_ptt" operation="REGISTRA_LOG_ERRO"
                              inputVariable="InvokeRegistraLogErro_Input"
                              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                              outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/><assign name="AssignExcluiPolling"
                                                                                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
      </copy>
   </assign><invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></catch>
        <catch faultName="ns2:validation_limit_request" faultVariable="validation_limit_request"
               faultMessageType="ns2:geradorBoletos_validation_limit_requestMessage"><sequence name="Sequence17"><assign name="Assign429"
                                                                                                                         xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
      
      
   <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
      </copy><copy><from>$validation_limit_request.fault_validation_limit_request/ns14:codigo</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to></copy><copy><from>$validation_limit_request.fault_validation_limit_request/ns14:mensagem</from><to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to></copy><copy>
         <from>ora:getFlowId()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
      </copy></assign><invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO"
                              portType="ns13:REGISTRA_LOG_ERRO_ptt" operation="REGISTRA_LOG_ERRO"
                              inputVariable="InvokeRegistraLogErro_Input"
                              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                              outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/><assign name="AssignExcluiPolling"
                                                                                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
      </copy>
   </assign><invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence></catch>
        <catch faultName="ns2:validation_request" faultVariable="validation_request"
               faultMessageType="ns2:geradorBoletos_validation_requestMessage">
          <sequence>
            <assign name="Assign422">
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
              </copy>
              <copy>
                <from>$validation_request.fault_validation_request/ns14:codigo</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to>
              </copy>
              <copy>
                <from>$validation_request.fault_validation_request/ns14:mensagem</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to>
              </copy>
              <copy>
                <from>ora:getFlowId()</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
              </copy>
            </assign>
            <invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO" portType="ns13:REGISTRA_LOG_ERRO_ptt"
                    operation="REGISTRA_LOG_ERRO" inputVariable="InvokeRegistraLogErro_Input"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                    outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/><assign name="AssignExcluiPolling"
                                                                                                     xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
              </copy>
            </assign><invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence>
        </catch>
        <catch faultName="ns2:validation_token" faultVariable="validation_token"
               faultMessageType="ns2:geradorBoletos_validation_tokenMessage" bpelx:name="validation_token">
          <sequence>
            <assign name="AssignRenovarToken">
              <copy>
                <from>translate($Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:cdCnpjCedenBoletBanca,'.-/','')</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_CNPJ_CEDENTE_BOLETO</to>
              </copy>
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:orgId</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_ORG_ID</to>
              </copy>
              <copy>
                <from>''</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaToken_Input.InputParameters/ns24:VP_ID_TOKEN</to>
              </copy>
            </assign><invoke name="InvokeAtualizaToken" partnerLink="ATUALIZA_TOKEN" portType="ns21:ATUALIZA_TOKEN_ptt"
                             operation="ATUALIZA_TOKEN" inputVariable="InvokeAtualizaToken_Input"
                             outputVariable="InvokeAtualizaToken_Output" bpelx:invokeAsDetail="no"
                             xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                             xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/>
            <assign name="AssignGerado">
              <copy>
                <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaStatus_Input.InputParameters/ns26:VP_ID_BOLETO</to>
              </copy>
              <copy>
                <from>'GERADO'</from>
                <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeAtualizaStatus_Input.InputParameters/ns26:VP_BOLETO_STATUS</to>
              </copy>
            </assign>
            <invoke name="InvokeAtualizaStatus" partnerLink="ATUALIZA_STATUS"
                    portType="ns25:ATUALIZA_STATUS_ptt" operation="ATUALIZA_STATUS"
                    inputVariable="InvokeAtualizaStatus_Input" outputVariable="InvokeAtualizaStatus_Output"
                    bpelx:invokeAsDetail="no"/>
          </sequence>
        </catch>
        <catch faultName="ns2:validation_error" faultVariable="validation_error"
               faultMessageType="ns2:geradorBoletos_validation_errorMessage" bpelx:name="validation_error">
          <sequence><forEach parallel="no" counterName="index" name="ForEachValidacaoCampos">
              <startCounterValue expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">1</startCounterValue>
              <finalCounterValue expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">count($validation_error.fault_validation_error/ns14:campos)</finalCounterValue>
              <scope name="Scope1">
                <sequence name="Sequence7">
                  <assign name="Assign400" xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
                    <copy>
                      <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
                    </copy>
                    <copy>
                      <from>$validation_error.fault_validation_error/ns14:codigo</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CD_ERRO</to>
                    </copy>
                    <copy>
                      <from>$validation_error.fault_validation_error/ns14:mensagem</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_MSG_ERRO</to>
                    </copy>
                    <copy>
                      <from>$validation_error.fault_validation_error/ns14:campos[$index]/ns14:campo</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_CP_ERRO</to>
                    </copy>
                    <copy>
                      <from>$validation_error.fault_validation_error/ns14:campos[$index]/ns14:mensagem</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to>
                    </copy>
                    <copy ignoreMissingFromData="yes">
                      <from>$validation_error.fault_validation_error/ns14:campos[$index]/ns14:valor</from>
                      <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
                    </copy>
                  </assign>
                  <invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO"
                          portType="ns13:REGISTRA_LOG_ERRO_ptt" operation="REGISTRA_LOG_ERRO"
                          inputVariable="InvokeRegistraLogErro_Input"
                          xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                          xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                          outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/><assign name="AssignExcluiPolling"
                                                                                                           xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
      </copy>
   </assign><invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence>
              </scope>
            </forEach></sequence>
        </catch>
        <catchAll>
          <sequence name="Sequence8"><assign name="AssignErrorDesconhecido"
                                                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      
      
      
      
   <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_ID_BOLETO</to>
      </copy><copy>
         <from>'ERRO DESCONHECIDO'</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_DS_ERRO</to>
      </copy><copy>
         <from>ora:getFlowId()</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraLogErro_Input.InputParameters/ns17:VP_VL_ERRO</to>
      </copy></assign><invoke name="InvokeRegistraLogErro" partnerLink="REGISTRA_LOG_ERRO"
                              portType="ns13:REGISTRA_LOG_ERRO_ptt" operation="REGISTRA_LOG_ERRO"
                              inputVariable="InvokeRegistraLogErro_Input"
                              xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                              xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
                              outputVariable="InvokeRegistraLogErro_Output" bpelx:invokeAsDetail="no"/><assign name="AssignExcluiPolling"
                                                                                                               xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable">
      <copy>
         <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
         <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
      </copy>
   </assign><invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                    operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                    outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"
                    xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
                    xmlns="http://docs.oasis-open.org/wsbpel/2.0/process/executable"/></sequence>
        </catchAll>
      </faultHandlers>
      <sequence name="Sequence3">
        <invoke name="InvokeGerarBoleto" partnerLink="GerarBoleto" portType="ns2:geradorBoletosItau_ptt"
                operation="geradorBoletos" inputVariable="Invoke_geradorBoletos_Input"
                outputVariable="Invoke_geradorBoletos_Output" bpelx:invokeAsDetail="no"
                bpelx:inputHeaderVariable="Header"/><assign name="AssignUpdate">
          <copy>
            <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraBoleto_Input.InputParameters/ns12:VP_ID_BOLETO</to>
          </copy>
          <copy ignoreMissingFromData="yes">
            <from>$Invoke_geradorBoletos_Output.reply/ns8:nosso_numero</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraBoleto_Input.InputParameters/ns12:VP_CD_NOSSO_NUMER_RETORNO</to>
          </copy>
          <copy ignoreMissingFromData="yes">
            <from>$Invoke_geradorBoletos_Output.reply/ns8:numero_linha_digitavel</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraBoleto_Input.InputParameters/ns12:VP_DS_CODIG_BARRA_RETORNO</to>
          </copy>
          <copy ignoreMissingFromData="yes">
            <from>$Invoke_geradorBoletos_Output.reply/ns8:codigo_barras</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeRegistraBoleto_Input.InputParameters/ns12:VP_CD_CODIG_BARRA_RETORNO</to>
          </copy>
        </assign>
        <invoke name="InvokeRegistraBoleto" partnerLink="REGISTRA_BOLETO" portType="ns11:REGISTRA_BOLETO_ptt"
                operation="REGISTRA_BOLETO" inputVariable="InvokeRegistraBoleto_Input"
                outputVariable="InvokeRegistraBoleto_Output" bpelx:invokeAsDetail="no"/>
        <assign name="AssignExcluiPolling">
          <copy>
            <from>$Receive_polling_Input.TktArBoletoRemessaCollection/ns6:TktArBoletoRemessa/ns6:idBoleto</from>
            <to expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">$InvokeExcluiPolling_Input.InputParameters/ns29:VP_ID_BOLETO</to>
          </copy>
        </assign>
        <invoke name="InvokeExcluiPolling" partnerLink="EXCLUI_POLLING" portType="ns28:EXCLUI_POLLING_ptt"
                operation="EXCLUI_POLLING" inputVariable="InvokeExcluiPolling_Input"
                outputVariable="InvokeExcluiPolling_Output" bpelx:invokeAsDetail="no"/>
      </sequence>
    </scope>
  </sequence>
</process>